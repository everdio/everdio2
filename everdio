#!/usr/bin/env php
<?php
\ini_set("memory_limit", "1536M");
\ini_set("display_errors", 1);

include_once(__DIR__ . \DIRECTORY_SEPARATOR . "everdio.php");

$cli = new \Component\Core\Controller\Model\Cli;
$cli->server = $_SERVER;
$cli->path = __DIR__;
$cli->setup();

try {
    echo $cli->execute(\DIRECTORY_SEPARATOR . $cli->route) . \PHP_EOL;
    \flush();
} catch (\ErrorException | \Exception $ex) {
    echo \sprintf("\n%s: %s\n\n", \get_class($ex), $ex->getMessage());
    if (isset($cli->request->_debug)) {
        echo \sprintf("\n%s\n\n", $ex->getTraceAsString());
    }
}
exit;